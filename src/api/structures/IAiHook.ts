import { tags } from "typia";

/**
 * AI 훅(마이크로서비스 연동 엔드포인트) 메인 엔터티 타입.
 *
 * Prisma 'ai_hooks' 테이블의 스키마와 코멘트, AI 계층(개별 인텔리전스 모듈) 등록 관리를 위한 전 필드 명세를 반영한다.
 *
 * 각 필드는 DB 구조와 감사성·확장가능성을 최대화하기 위해 설명이 첨부되었으며, audit 목적 필수 필드까지 포함한다.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IAiHook = {
  /**
   * 고유 AI 훅 식별자(UUID).
   *
   * Prisma 'ai_hooks' 테이블의 id 필드에 해당.
   */
  id: string & tags.Format<"uuid">;

  /**
   * 이 AI 훅이 속한 채널 식별자(UUID).
   *
   * Prisma channel_id 컬럼 참조. 다중 채널 시스템의 구분용.
   */
  channel_id: string & tags.Format<"uuid">;

  /**
   * AI 훅의 적용 엔터티 타입(예: 'order', 'product', 'user').
   *
   * Prisma target_entity_type 컬럼.
   */
  target_entity_type: string;

  /**
   * AI 마이크로서비스 엔드포인트 URL(예: 'https://ai.mall.com/reco', 최대 80000자).
   *
   * Prisma의 endpoint_url 컬럼. 외부 연동점의 실제 주소.
   */
  endpoint_url: string;

  /**
   * 엔드포인트로 전달될 config 값(JSON 직렬 문자열). 선택값.
   *
   * Prisma config_json 컬럼: Hook 동작/알고리즘 환경설정 저장, 예시: '{"threshold":0.8}'.
   */
  config_json?: string;

  /**
   * 활성/비활성 상태. 이 값이 false인 경우 실제 호출이나 연동 skip.
   *
   * Prisma enabled 컬럼(실서비스 on/off).
   */
  enabled: boolean;

  /**
   * AI 훅 등록 시간(감사 목적).
   *
   * Prisma created_at(등록 시각, 변동 불가).
   */
  created_at: string & tags.Format<"date-time">;

  /**
   * 이 레코드의 마지막 수정 시각.
   *
   * Prisma updated_at(변경/갱신 일시, 변동 가능).
   */
  updated_at: string & tags.Format<"date-time">;

  /**
   * 소프트 삭제 시점(있으면 비노출/비활성 처리).
   *
   * Prisma deleted_at(소프트 삭제).
   */
  deleted_at?: (string & tags.Format<"date-time">) | null;
};
export namespace IAiHook {
  /**
   * AI 훅(마이크로서비스 엔드포인트) 페이징/검색 기능의 조건 정의 타입.
   *
   * Prisma 'ai_hooks' 테이블의 주요 컬럼을 기반으로, 키워드·상태·기간 등 고급 검색 요건을 반영한다.
   */
  export type IRequest = {
    /**
     * 채널 UUID(선택적). 이 AI 훅 검색시 채널 범위를 제한한다.
     *
     * Prisma 'ai_hooks'의 channel_id 외래키/참조 주석 참고. 멀티테넌시/스토어별 분리 지원을 위해 지정
     * 가능하다.
     */
    channel_id?: string & tags.Format<"uuid">;

    /**
     * AI 훅이 담당하는 엔터티 타입(예: 'order', 'product', 'user 등').
     *
     * Prisma 테이블 'ai_hooks'의 target_entity_type 컬럼에 해당. 필터링이나 등록목적 파라미터로
     * 사용된다.
     */
    target_entity_type?: string;

    /**
     * 활성/비활성 여부(선택적).
     *
     * Prisma 스키마 enabled 컬럼 주석 참고. 미지정 시 전체에서 필터링, true/false 지정 시 상태별 목록만
     * 조회.
     */
    enabled?: boolean;

    /** 생성일 시작 범위(선택, ISO 8601). */
    created_from?: string & tags.Format<"date-time">;

    /** 생성일 종료 범위(선택, ISO 8601). */
    created_to?: string & tags.Format<"date-time">;

    /**
     * 엔드포인트, config, 엔터티 키워드 등에 대한 통합 검색어(부분일치, 선택적).
     *
     * AI 훅 엔드포인트, 설명, config 등 다중 컬럼에 걸쳐 포괄적 텍스트 검색할 때 사용.
     */
    query?: string;
  };

  /**
   * AI 훅 신규 등록을 위한 생성 DTO.
   *
   * Prisma 'ai_hooks' 생성시 지정 가능한 필수 및 선택 필드를 포함해, 실무 기준 입력 폼 및 API 요구조건을 모두
   * 반영.
   *
   * 채널, 엔터티, 엔드포인트의 존재성 및 endpoint_url 형식 유효성 검증 필요.
   */
  export type ICreate = {
    /**
     * 생성 시 대상 채널 UUID(필수).
     *
     * Prisma channel_id 필드 기반, join하는 채널의 존재성 유효성 검증 필요.
     */
    channel_id: string & tags.Format<"uuid">;

    /**
     * 타겟될 엔터티 유형(예: 'order', 'product', 'user', 필수).
     *
     * Prisma target_entity_type 필드와 코멘트 참고.
     */
    target_entity_type: string;

    /**
     * AI 마이크로서비스 엔드포인트 주소(필수).
     *
     * Prisma 스키마 endpoint_url(length 최대 80000).
     */
    endpoint_url: string;

    /**
     * 생성 시 전달될 AI 훅 config(JSON 직렬 문자열). 선택값.
     *
     * Prisma config_json(동적 환경설정 저장 필드, 후처리 등).
     */
    config_json?: string;

    /**
     * 생성 시 활성화 여부(미지정 시 true 기본 추천).
     *
     * Prisma enabled: 실제 연동/테스트 시 on/off 상태.
     */
    enabled: boolean;
  };

  /**
   * AI 훅 엔터티 수정용 DTO. 엔터티 타입/엔드포인트/config/활성화 등 주요 변경사항을 포함.
   *
   * Prisma 'ai_hooks'의 컬럼별 업데이트 요구 조건과 RBAC/감사 목적 반영.
   */
  export type IUpdate = {
    /** 수정할 엔터티 타입(예: 'order', 'product', 'user'). 알맞은 값으로만 변경 가능. */
    target_entity_type?: string;

    /** 새 엔드포인트 주소. 미지정 시 기존 값 그대로. */
    endpoint_url?: string;

    /** 수정 요청시 전송할 config JSON 문자열. 선택. */
    config_json?: string;

    /** 활성 여부(enabled) 변경시 true/false 지정. */
    enabled?: boolean;
  };
}

import { tags } from "typia";

/**
 * AnalyticsMetric(보고/분석 지표) 엔터티.
 *
 * Analytics_metric 테이블의 모든 필드를 반영. 각 레코드는 보고/모니터링용 지표 정의를 담당하고, 이름(식별자), 설명,
 * 데이터 소스, 타입, 생성/수정일 등 핵심 메타데이터를 포함합니다. 관리자는 새로운 메트릭 정의, 수정, 교체, 폐기까지 전체 CRUD를
 * 모두 처리할 수 있습니다.
 *
 * RBAC 기반 권한 체크 및 확장성을 고려. 메트릭 설명(description)/소스(source)는 Admin UI, API 문서 등
 * 관리/분석 용도의 상세 설명이 들어갑니다.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IAnalyticsMetric = {
  /** 메트릭 고유 ID. */
  id: string & tags.Format<"uuid">;

  /** 지표 이름(관리, 분석, 식별, 검색에 사용). */
  name: string;

  /** 상세 비즈니스/분석 설명. */
  description?: string | null;

  /** 데이터 소스: 테이블명, 외부 API, 쿼리 등 분석/모니터링에 사용되는 원천정보 기록. */
  source: string;

  /** 데이터 형태(타입) 예: int, double, string, datetime 등. */
  data_type: string;

  /** 생성 시각. */
  created_at: string & tags.Format<"date-time">;

  /** 수정 시각. */
  updated_at: string & tags.Format<"date-time">;
};
export namespace IAnalyticsMetric {
  /**
   * AnalyticsMetric(메트릭) 목록 조회 및 필터 검색 요청 DTO.
   *
   * 프리즈마 analytics_metric 테이블과 완벽하게 일치하는 페이징, 필터, 정렬 등 쿼리 조건을 종합적으로 지원합니다. 일반
   * 사용자는 name, data_type, source 등으로, 관리자나 분석가 등은 전체 메트릭 리스팅 및 상세 조건으로 조회할 수
   * 있습니다. full-text, GIN 인덱스 활용 가능하게 설계됨.
   */
  export type IRequest = {
    /** 조회(부분)조건: 이름, 타입, 소스 등 */
    filter?: {
      /** 이름 키워드 부분 검색 */
      name?: string | null;

      /** 데이터 타입: int, double, string, datetime 등 */
      data_type?: string | null;

      /** 데이터 소스: 테이블, 외부 API, 쿼리 등 */
      source?: string | null;
    };

    /** 정렬 필드. ex) name, created_at */
    sort?: string | null;

    /** 정렬 방향(asc/desc) */
    order?: "asc" | "desc";

    /** 현재 페이지(1-base) */
    page: number & tags.Type<"int32"> & tags.Default<1> & tags.Minimum<1>;

    /** 한 페이지 당 항목 개수 */
    limit: number &
      tags.Type<"int32"> &
      tags.Default<20> &
      tags.Minimum<1> &
      tags.Maximum<100>;
  };

  /**
   * 새 AnalyticsMetric(보고/분석 지표) 생성 요청 DTO.
   *
   * 지표 등록 시 필요한 필수 필드(name, source, data_type 등)와 부가 설명(description), 관리/운영
   * 고려사항 포함. RBAC 감사를 통해 관리자가 신규 메트릭을 정의할 때 사용하는 데이터 구조입니다.
   */
  export type ICreate = {
    /** 메트릭(지표)의 논리 이름. */
    name: string;

    /** (선택) 지표 설명, 분석 모티브, 산출 근거 등. */
    description?: string | null;

    /** 분석/보고 소스(테이블/외부 API 등) */
    source: string;

    /** 메트릭 데이터 유형(int, double, string, datetime 등) */
    data_type: string;
  };

  /**
   * 기존 AnalyticsMetric(지표) 수정용 DTO. name, description, source, data_type 등 수정
   * 가능. PK는 경로/파라미터(id)로 식별됨. 모든 변경 사항은 RBAC규칙 하에 audit trail을 생성하며, 수정 후
   * updated_at 자동 갱신.
   *
   * 일부 비즈니스 정책상 소스/타입 변경은 제한될 수 있음.
   */
  export type IUpdate = {
    /** 지표 이름. */
    name?: string;

    /** 상세 설명. */
    description?: string | null;

    /** 지표 데이터 소스. */
    source?: string;

    /** 데이터 타입. */
    data_type?: string;
  };
}

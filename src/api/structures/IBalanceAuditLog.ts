import { tags } from "typia";

/**
 * Atomic event in user balance audit trail (balance_audit_logs table).
 *
 * Immutable. Records a credit/debit/expire/audit for user balance, referencing
 * only atomic context.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IBalanceAuditLog = {
  /** Unique identifier for audit event. 'id' in balance_audit_logs. */
  id: string & tags.Format<"uuid">;

  /** UUID of the user related to the event. 'user_id'. */
  user_id: string & tags.Format<"uuid">;

  /**
   * Kind of event: credit, debit, expire, adjustment, etc. 'event_type'.
   * Enables quick classification for audit/analytics.
   */
  event_type: string;

  /**
   * Change in balance recorded by the event. 'amount'. Always atomic, per
   * entry.
   */
  amount: number &
    tags.JsonSchemaPlugin<{
      format: "double";
    }>;

  /**
   * Type of balance affected (deposit, mileage, refund, promo, etc.).
   * 'balance_type'.
   */
  balance_type: string;

  /**
   * Reference to the related action/event (e.g. deposit ID, refund ID).
   * 'event_ref'. Nullable.
   */
  event_ref?: string;

  /** Notes/context for the audit row. 'description'. */
  description?: string;

  /** Timestamp of event. 'created_at'. */
  created_at: string & tags.Format<"date-time">;
};
export namespace IBalanceAuditLog {
  /**
   * Filter and search request for user balance audit logs (balance_audit_logs
   * table).
   *
   * Enables compliance-grade, filtered search for reviewing or exporting
   * audit trail events per user, event, date, or description.
   */
  export type IRequest = {
    /**
     * User to filter balance audit logs for. Relates to user_id in
     * balance_audit_logs. Used for compliance exports/auditing/analytics.
     */
    user_id?: string & tags.Format<"uuid">;

    /**
     * Type of balance to filter logs for (deposit, mileage, refund). From
     * 'balance_type' field in balance_audit_logs. Enables discrimination
     * per subsystem.
     */
    balance_type?: string;

    /**
     * Balance event type to filter for: credit, debit, expire, adjustment,
     * etc. Maps to 'event_type' in balance_audit_logs. Allows advanced
     * analytics and compliance reporting.
     */
    event_type?: string;

    /**
     * Start of date range for log creation timestamp. Helps in
     * regulatory/export audits.
     */
    created_from?: string & tags.Format<"date-time">;

    /** End of date range for log creation. */
    created_to?: string & tags.Format<"date-time">;

    /** Filter by substring/keyword in the balance audit log description. */
    description?: string;

    /** Page number for pagination. */
    page?: number &
      tags.Type<"int32"> &
      tags.JsonSchemaPlugin<{
        format: "int32";
      }>;

    /** Pagination limit (results per page). */
    limit?: number &
      tags.Type<"int32"> &
      tags.JsonSchemaPlugin<{
        format: "int32";
      }>;
  };

  /**
   * Creation request for new balance audit log entry (balance_audit_logs
   * table).
   *
   * Must be generated on all balance changes, strict compliance.
   */
  export type ICreate = {
    /**
     * UUID of the related user. Maps to 'user_id' in balance_audit_logs.
     * Must be present for compliance reporting and analysis.
     */
    user_id: string & tags.Format<"uuid">;

    /**
     * Type of event: credit, debit, expire, adjustment, audit, etc. Must
     * match 'event_type' schema for strict normal form.
     */
    event_type: string;

    /**
     * Change amount for user balance in this event. 'amount' column.
     * Negative for debit, positive for credit/bonus.
     */
    amount: number &
      tags.JsonSchemaPlugin<{
        format: "double";
      }>;

    /**
     * Type of balance being changed (deposit, mileage, refund, etc.). See
     * 'balance_type' in audit log schema.
     */
    balance_type: string;

    /**
     * Optional reference to external event (deposit, refund, etc.)
     * 'event_ref'. Used for full audit chaining.
     */
    event_ref?: string;

    /**
     * Memo or context info for this audit event. Enables justification or
     * explanation for later review.
     */
    description?: string;
  };

  /**
   * Update request for a balance audit log. Only event_ref and description
   * are mutable; core audit event properties are not changeable once written
   * (regulatory compliance).
   */
  export type IUpdate = {
    /**
     * (Optional) Update or correction to the cross-entity reference
     * (deposit ID, refund ID, etc.).
     *
     * From 'event_ref' in balance_audit_logs. Relevant for
     * compliance/corrective updates.
     */
    event_ref?: string;

    /**
     * (Optional) Additional or revised memo/context field for the audit
     * row.
     *
     * From 'description'. Used for supplementary notes, error
     * justifications, or business annotation.
     */
    description?: string;
  };
}

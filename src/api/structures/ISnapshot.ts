import { tags } from "typia";

/**
 * 스냅샷 엔터티 기본 타입. 모든 주요 데이터(제품, 게시글, 카테고리 등) 변경 이력 및 감사/컴플라이언스 대응의 근간.
 *
 * - 불변 구조, 변경 불가. 생성 후 Lock. - 프리즈마 'snapshots'와 전속 매핑
 * - 롤백, 이력 검출, 감리/법률대응 필수 로직 구조.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type ISnapshot = {
  /** 고유 스냅샷 식별자. 프리즈마 'snapshots.id'와 1:1 매핑. */
  id: string & tags.Format<"uuid">;

  /**
   * 스냅샷 대상 엔터티 타입 (예: 'product', 'category', 'board_post').
   *
   * 다중 테이블 포인트(제품, 게시판, 주문 등) 식별용.
   */
  entity_type: string;

  /**
   * 스냅샷 대상 엔터티(PK) UUID.
   *
   * 변경 이력 추적 또는 롤백 기준 포인트.
   */
  entity_id: string & tags.Format<"uuid">;

  /** 변경 구분 (예: 'create', 'update', 'delete'). 단순 이력/감사 구현. */
  change_type: string;

  /**
   * 변경 사유(선택).
   *
   * 감사/보안/법적 증거 보강용 메모, 주로 수정/삭제 시.
   */
  change_reason?: string | null;

  /** 스냅샷 생성 시각 — 변조 불가, 감사 대상. */
  created_at: string & tags.Format<"date-time">;
};
export namespace ISnapshot {
  /**
   * 스냅샷 엔티티 목록/이력 검색용 페이징 및 필터링 파라미터 타입.
   *
   * 복수 엔티티(제품, 주문, 게시물, 카테고리 등) 공통 스냅샷 히스토리 검색에 사용하는 표준 API 입력입니다. 프리즈마 DB
   * 'snapshots' 구조와 100% 일치하며, 고급 감사/변경이력 추적/안정성 보장에 필수입니다.
   */
  export type IRequest = {
    /**
     * 스냅샷 엔터티의 대상 타입(예: 'product', 'order', 'category' 등).
     *
     * 복합 시스템에서 공통 포인트 관리에 활용, 복수 테이블/도메인 구분자 역할.
     */
    entity_type?: string;

    /** 스냅샷 엔터티의 원본 ID. 해당 엔티티(PK)와 1:1 매핑되어 변경 이력 검토/감사 및 롤백에 사용. */
    entity_id?: string & tags.Format<"uuid">;

    /**
     * 변경 유형 — 생성, 수정, 삭제 등. (예: 'create', 'update', 'delete')
     *
     * 스냅샷의 이력 단계 구분.
     */
    change_type?: string;

    /** 스냅샷 시작 조회 구간(=timestamp >= from) */
    created_at_from?: string & tags.Format<"date-time">;

    /** 스냅샷 끝 조회 구간(=timestamp <= to) */
    created_at_to?: string & tags.Format<"date-time">;

    /** 변경/스냅샷 사유(키워드 검색). */
    reason_like?: string;

    /** 정렬 기준 — 생성일 기준만 지정 가능. */
    order_by?: "created_at";

    /** 정렬 방향 */
    order_dir?: "asc" | "desc";

    /** 페이지 번호(1-base). */
    page?: number & tags.Type<"int32">;

    /** 페이지 당 레코드 수(기본 100, 최대는 정책에 따름). */
    limit?: number & tags.Type<"int32">;
  };

  /**
   * 스냅샷 신규 생성 요청 바디 타입. 시스템 변경이력 로그, 컴플라이언스, 롤백 기능 구현의 핵심.
   *
   * 입력값은 엔티티 식별 정보, 이벤트 형태, (선택)변경 사유로 구성.
   */
  export type ICreate = {
    /**
     * 스냅샷 생성 대상 엔터티 클래스명. 예: 'product', 'order', 'category', 'board_post'
     * 등.
     */
    entity_type: string;

    /** 스냅샷을 생성할 원본 엔터티 UUID. */
    entity_id: string & tags.Format<"uuid">;

    /**
     * 변경이력 유형('create','update','delete').
     *
     * 데이터 변경/생성/삭제 등 이력 이벤트 기록용.
     */
    change_type: string;

    /** 변경 사유(선택) — 감사/법적 사유 기록시 활용. */
    change_reason?: string | null;
  };

  /**
   * 스냅샷 주석/메타데이터(사유 등) 업데이트를 위한 타입.
   *
   * Prisma 'snapshots' 테이블의 코멘트 및 API update 요구사항을 반영. 주로 변경 사유 등 사후 주석의 수정을
   * 담당하며, 내용 데이터는 불변성을 유지한다. 감사/규제적 사후 기록을 위한 필드 집합이다.
   */
  export type IUpdate = {
    /**
     * 수정할 스냅샷의 사유(관리자 또는 시스템 기록). 예시: '입력 오류', '데이터 수정 사유'.
     *
     * Prisma 'snapshots' 테이블의 change_reason 컬럼에서 발췌됨. 설명: 스냅샷의 변경/수정 이유로,
     * 법적, 감사, 기능 보완 등 다양한 목적의 주석 필드를 제공한다.
     */
    change_reason: string;
  };
}
